---
id: upstizmk
title: Alarm and abort
file_version: 1.1.3
app_version: 1.13.13
---

# ALARM

The ALARM section in the code snippet from `Comanche055/ALARM_AND_ABORT.agc` handles the program alarm functionality. It turns on the program alarm light without displaying any message.

## Simple Usage Example

To use the ALARM functionality, follow these steps:

1.  Set the `ALARM` flag to indicate the presence of an alarm.

2.  Update the `ALMCADR` register with the current value of `Q`.

3.  Set the index register to `Q`.

4.  Set the accumulator (`A`) to 0.

5.  Store the value of `A` in the `L` register.

6.  Set the `ALMCADR + 1` register to the value of `BBANK` plus 1, with the super bits added.

7.  Store the return address for the alarm in `ITEMP1`.

8.  Set the `LOCALARM` register to the current value of `LOC`.

9.  Set the `BANKALRM` register to the current value of `BANKSET`.

10.  Check if there is anything in the `FAILREG` register.

11.  If `FAILREG` is not empty, turn on the alarm light for the first alarm.

12.  If `FAILREG + 1` is not empty, handle the second alarm.

13.  If `FAILREG + 2` is not empty, handle the third alarm.

14.  If any alarm is triggered, update the

    <br/>

<br/>

This code snippet is a part of a program that handles alarms. It checks if there are any failures and turns on the alarm light if there is a failure.
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ Comanche055/ALARM_AND_ABORT.agc
```agc
51     # ALARM TURNS ON THE PROGRAM ALARM LIGHT, BUT DOES NOT DISPLAY.
52     
53     ALARM		INHINT
54     
55     		CA	Q
56     ALARM2		TS	ALMCADR
57     		INDEX	Q
58     		CA	0
59     BORTENT		TS	L
60     
61     PRIOENT		CA	BBANK
62      +1		EXTEND
63     		ROR	SUPERBNK	# ADD SUPER BITS.
64     		TS	ALMCADR +1
65     
66     LARMENT		CA	Q		# STORE RETURN FOR ALARM
67     		TS	ITEMP1
68     
69     		CA	LOC
70     		TS	LOCALARM
71     		CA	BANKSET
72     		TS	BANKALRM
73     
74     CHKFAIL1	CCS	FAILREG		# IS ANYTHING IN FAILREG
75     		TCF	CHKFAIL2	# YES TRY NEXT REG
76     		LXCH	FAILREG
77     		TCF	PROGLARM	# TURN ALARM LIGHT ON FOR FIRST ALARM
78     
79     CHKFAIL2	CCS	FAILREG +1
80     		TCF	FAIL3
81     		LXCH	FAILREG +1
82     		TCF	MULTEXIT
83     
84     FAIL3		CA	FAILREG +2
85     # Page 1494
86     		MASK	POSMAX
87     		CCS	A
88     		TCF	MULTFAIL
89     		LXCH	FAILREG +2
90     		TCF	MULTEXIT
91     
92     PROGLARM	CS	DSPTAB +11D
93     		MASK	OCT40400
94     		ADS	DSPTAB +11D
95     
96     MULTEXIT	XCH	ITEMP1		# OBTAIN RETURN ADDRESS IN A
97     		RELINT
98     		INDEX	A
99     		TC	1
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBQXBvbGxvLTExJTNBJTNBZ2lsYWRuYXZvdA==/docs/upstizmk).
